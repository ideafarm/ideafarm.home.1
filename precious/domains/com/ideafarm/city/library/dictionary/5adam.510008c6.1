
//
// Copyright (c) 1992-2025 Wo Of Ideafarm.  All rights reserved.  See https://github.com/ideafarm/ideafarm.home.1 for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 33 years.
// Respecting the rights of other people is an important part of empowering one another.
//

                            
REST

sgnDone_tmWorkF.waitF( tin0P ) ;
etThread.osThreadF( TaRG3sGNdONEcBsTACK( tmWorkF , sgnDone_tmWorkF , TICK >> 2 ) ) ;     //U::O: REPLACE "TICK >> 2" WITH MINIMUM cbStackP VALUE THAT WORKS RELIABLY
signC sgnDone_tmWorkF( tin0P , TAG( TAGiDnULL ) ) ;

TODO

DONE( tmWorkF )

}
    }
        DEL( pSub ) ;
        }
            etThread.ifcHireF( tin0P , T("ifcIDaDAM_TOOLrEGISTEReMAIL") , ifcIDaDAM_TOOLuPDATEkIT , tArg , flHIRE_WAIT | flHIRE_DISPLAYtEXT , nicNameC() ) ;
            etThread.traceF( tin0P , tArg , flTRACE_NOpREFIX ) ;
            tArg = T("!ignoreFireByOperator !update ")+tLongExe+T(" ///ideafarm/tmp/ideanet.rc ///ideafarm/tmp/ideanet.res") ;

            etThread.diskCopyFileF( tin0P , tLongExe , T("///d/ideafarm.home.1/ephemeral/release/ideanet.unconfigured.exe") ) ;

            TN( tLongExe , "///ideafarm/tmp/ideanet.key." ) ; tLongExe += TF2(idSub,flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED)+T(".exe") ;

            // kitfresh  !update ///ideafarm/tmp/ideanet.[tSoulSubDump].exe ///ideafarm/tmp/ideanet.[tSoulSubDump].rc ///ideafarm/tmp/ideanet.[tSoulSubDump].res

            etThread.ifcHireF( tin0P , T("ifcIDaDAM_TOOLrEGISTEReMAIL") , ifcIDaDAM_TOOLmAKEkITsOURCEfILE , tArg , flHIRE_WAIT | flHIRE_DISPLAYtEXT , nicNameC() ) ;
            etThread.traceF( tin0P , tArg , flTRACE_NOpREFIX ) ;
            TN( tArg , "" ) ; tArg = T("!ignoreFireByOperator !string 101 \"")+tSoulSubDump+T("\" !long ///ideafarm/tmp/ideanet.rc") ;

            // kitsource !string 101 "[tSoulSubDump]" !long ///ideafarm/tmp/ideanet.rc

            }
                etThread.delF( tin0P , psttd ) ;
                tSoulSubDump = T(psttd) ;
                etThread.strDumpIF( tin0P , psttd , pbSoul , cbSoul , flSTRdUMP_FOREIGN , 0 , 0 , 0 , 0 ) ; ___( psttd ) ;
                ZE( strokeS* , psttd ) ;
            {
            TN( tSoulSubDump , "" ) ;

            etThread.boxPutF( tin0P , tLongSoul , pbSoul , cbSoul ) ;

            countT       cbSoul = soulSub.cbF( tin0P ) ;
            const byteT* pbSoul = soulSub ;

            *pSub >> soulSub ;
            soulC soulSub( tin0P , etThread , TAG( TAGiDnULL ) ) ;

            etThread.traceF( tin0P , T("registering [email,dump]:    ")+tEmail+tb4+tEmailDump+tb4+tLongSoul ) ;
            TN( tLongSoul , "" ) ; tLongSoul = T("///d/ideafarm.home.101/ephemeral/shared/")+TfORsTRING(ifcIDaDAM_TOOLrEGISTEReMAIL)+T("/sub.01.00000001.")+TfORsTRING(idSub)+tDot+tEmailDump+T(".soulC") ;
        {
        if( pSub )
        countT idSub = welcomeF( tin0P , etThread , etRock , pSub , tEmail ) ; ___( pSub ) ;
        ZE( ideaNetSubscriptionC* , pSub ) ;
    {
    if( tEmailDump.csF( tin0P ) )

    }
        etThread.delF( tin0P , psttd ) ;
        tEmailDump = T(psttd) ;
        etThread.strDumpIF( tin0P , psttd , tEmail , tEmail.csF( tin0P ) , flSTRdUMP_FOREIGN , 0 , 0 , 0 , 0 ) ; ___( psttd ) ;
        ZE( strokeS* , psttd ) ;
    {
    if( tEmail.csF( tin0P ) )
    TN( tEmailDump , "" ) ;

    }
        }
            }
                break ;
                tEmail = T(psttc1) ;
            {
            else if( bArmed )
            if( !etThread.strCompareF( tin0P , psttc1 , tHeyUpdate ) ) bArmed = 1 ;

            etThread.traceF( tin0P , T("[parameter]:    ")+T(psttc1) ) ;
        {
        FORsTRINGSiN1( etThread.ether_pstt1_processParametersI_F( tin0P ) )
        ZE( boolT  , bArmed ) ;
        TN( tHeyUpdate , "!email" ) ;
    {
    TN( tEmail , "" ) ;

    TN( tDot , "."    ) ;
    TN( tb4  , "    " ) ;

    etherC& etRock = etherC::etRockIF( tin0P ) ;
{
if( pTaskP )
TASK( tmWorkF )

}
    return idSub ;

    pSubP = new( 0 , tin0P , LF ) ideaNetSubscriptionC( tin0P , etherP , 1 , idSub , tSecret , tEmail ) ; ___( pSubP ) ;

    etherP.traceF( tin0P , T("[idBook,idSub,generatedSecret]:    ")+TF2(idBook,flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED)+tb4+TF2(idSub,flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED)+tb4+tSecret ) ;
    }
        etherP.delF( tin0P , psttMac ) ;
        tSecret = T(psttMac) ;
        etherP.openSslHmacF( tin0P , psttMac , tEmail , tEmail.csF( tin0P ) , (byteT*)&timeN1 , sizeof timeN1 ) ; ___( psttMac ) ;
        ZE( strokeS* , psttMac ) ;
    {
    TN( tSecret , "" ) ;

    TN( tEmail , psttEmailP ) ;
    TN( tb4    , "    " ) ;

    etherP.osTimeNowF( tin0P , timeN1 , timeN2 ) ;
    ZE( sCountT , timeN2 ) ;
    ZE( countT  , timeN1 ) ;

    }
        etherP.fileWriteF(  tin0P , fileCount , (byteT*)&idSubLath , sizeof idSubLath ) ;
        etherP.fileSetPtrF( tin0P , fileCount , flSETfILEpTR_BEGINNING , c2z ) ;
        count2S c2z ;
        idSub = ++ idSubLath ;

        }
            }
                etRockP.traceF( tin0P , T("!exception / invalid file size for idSlotUseLath, so using 0 [tLongIdSubLath]:    ")+tLongIdSubLath ) ;
                idSubLath = 0 ;
            {
            if( cbr - sizeof idSubLath )

            }
                }
                    cbr = 0 ;       // PROBABLY REDUNDANT
                    etRockP.traceF( tin0P , T("!exception / countT file is not of the expected size [tLongIdSubLath]")+tLongIdSubLath ) ;
                    POOPR ;
                {
                if( POOP )
                ((tin1S&)tin0P).pEtScratch->fileReadF( tin0P , (byteT*)&idSubLath , cbr , fileCount ) ;
                SCOOPS
            {
            IFsCRATCHoK
            countT cbr = sizeof idSubLath ;
        {
        else
        }
        {
        if( bNewFile )
        ZE( countT , idSubLath ) ;

        const boolT bNewFile = ifcOPENrESULT_CREATED == fileCount.idOpenResultF( tin0P  ) ;
        fileC fileCount( tin0P , (strokeS*)tLongIdSubLath , ifcOPENaCCESS_WR , 0 , flOPENdETAILS_LOCsEQ , ifcOPENhOW_nCeO ) ;

        TN( tLongIdSubLath , "" ) ; tLongIdSubLath = T("///d/ideafarm.home.101/ephemeral/shared/")+TfORsTRING(ifcIDaDAM_TOOLrEGISTEReMAIL)+T("/idBook.00000001.idSub.lath.bin") ;
    {
    ZE( countT , idSub ) ;

    countT idBook = 1 ;
{
countT welcomeF( tin0S& tin0P , etherC& etherP , etherC& etRockP , ideaNetSubscriptionC*& pSubP , const strokeS* const psttEmailP )

/*1*/WAKEhIDE( "ifcIDaDAM_TOOLrEGISTEReMAIL" )/*1*/
/**/
*/
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 33 years.
//
// Copyright (c) 1992-2025 Wo Of Ideafarm.  All rights reserved.  See https://github.com/ideafarm/ideafarm.home.1 for permitted uses.
//
