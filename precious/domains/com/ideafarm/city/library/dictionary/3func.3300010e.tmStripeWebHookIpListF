
//
// Copyright (c) 1992-2024 Wo Of Ideafarm.  All rights reserved.  See https://github.com/ideafarm/ideafarm.home.1 for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 33 years.
// Respecting the rights of other people is an important part of empowering one another.
//


DONE( tmStripeWebHookIpListF )
}
    grab_pnnAllowP.ungrabF( tinBaseP ) ;                
    etThread.delF( tinBaseP , pnnAllowP ) ;                     //OTHER THREADS THAT REFERENCE pnnAllowP MUST GRAB AND THEN VERIFY THAT pnnAllowP IS NOT 0 BEFORE ACCESSING IT
    grab_pnnAllowP.grabF( tinBaseP , TAG( TAGiDnULL ) ) ;                

    }
        }
            ++ s ; ether.osSleepF( tinBaseP , time1NapP ) ;

            etThread.delF( tinBaseP , postIn ) ;

            DEL( pSwPathValue ) ;

            }
                grab_pnnAllowP.ungrabF( tinBaseP ) ;                
                }
                    etThread.delF( tinBaseP , psttValue ) ;

                    }
                        }
                            pnnAllowP[ cnnAllowP ++ ] = nn ;
                            //etThread.traceF( tinBaseP , T("[nn,isIPv4F()]:    ")+T(nn)+T("    ")+TF2(nn.isIPv4F(),flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED) ) ;
                        {
                        if( ~nn )
                        nicNameC nn = socketC::nicNameIF( tinBaseP , etThread , psttValue ) ;

                        //etThread.traceF( tinBaseP , T("[ip]:    ")+T(psttValue) ) ;
                    {
                    if( psttValue && psttPath->idAdam == 0x19 && 1 == idHit )

                    //etThread.traceF( tinBaseP , T("[idAdam,idHit]:    ")+TF2(psttPath->idAdam,flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED)+T("    ")+TF2(idHit,flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED) ) ;
                    countT idHit = etThread.strIdF( tinBaseP , T("\"WEBHOOKS\"/item.") , psttPath , 1 ) ;

                    //etThread.traceF( tinBaseP , T("-------------------------- [path]:            ")+T(psttPath)  , flTRACE_NOpREFIX | flTRACE_KEEPcRlF ) ;

                    // "WEBHOOKS"/item.0000000c/
                    // 123456789abcdef0123456789abcdef0

                    strokeS*& psttValue = *(strokeS**)&(countT&)*pSwPathValue ;
                    psttPath = (strokeS*)pSwPathValue->leverF( tinBaseP , idf ) ;

                    _IO_
                {
                for( countT idf = 1 ; idf <= cFlavors ; idf ++ )

                etThread.newF( tinBaseP , LF , pnnAllowP , cFlavors ) ; ___( pnnAllowP ) ;      //LARGER THAN NECESSARY BECAUSE SOME FLAVORS ARE NOT IP ADDRESSES
                etThread.delF( tinBaseP , pnnAllowP ) ;
                cnnAllowP = 0 ;
                grab_pnnAllowP.grabF( tinBaseP , TAG( TAGiDnULL ) ) ;                

                countT cFlavors = pSwPathValue->cFlavorsF( tinBaseP ) ;
            {
            if( !POOP )

            __Z( pSwPathValue ) ;
            etThread.strParseJsonF( tinBaseP , pSwPathValue , psttPath , postIn , flSTACKc_null ) ;
            ZE( switchC* , pSwPathValue ) ;
            ZE( strokeS* , psttPath     ) ;

            //etThread.traceF( tinBaseP , T("---- END ----") ) ;
            //etThread.traceF( tinBaseP , T(postIn)  , flTRACE_NOpREFIX | flTRACE_KEEPcRlF ) ;
            //etThread.traceF( tinBaseP , T("---- BEGIN ----") ) ;

            }
                }
                    etThread.traceF( tinBaseP , T("boxGetShadowF failed") ) ;
                    POOPRqUIET
                {
                if( POOP )
                ((tin9S&)tinBaseP).pEtScratch->boxGetShadowF( tinBaseP , postIn , costIn , tUri , 1 , SOCKETtIMEOUTdEFAULTwAN ) ; ___( postIn ) ;
                SCOOPS
            {
            IFsCRATCH
            TN( tUri , "stripe.com//https/files/ips/ips_webhooks.json" ) ;
            ZE( countT , costIn ) ;
            ZE( byteT* , postIn ) ;

            etThread.traceF( tinBaseP , T("querying Stripe for the current Stripe Webhook client IP list") ) ;
        {
        while( !ether )
        sleepC s( tinBaseP , TAG( TAGiDnULL ) ) ;
    {
    if( !POOP )

    __NZ( pnnAllowP ) ;
    countT       time1NapP      =              pTaskP->c5 ;
    grabC&       grab_pnnAllowP =     *(grabC*)pTaskP->c4 ;
    countT&      cnnAllowP      =    *(countT*)pTaskP->c3 ;
    nicNameC*&   pnnAllowP      = *(nicNameC**)pTaskP->c2 ;
    const boolT& bQuitP         =     *(boolT*)pTaskP->c1 ;
{
if( pTaskP && pTaskP->c1 && pTaskP->c2 && pTaskP->c3 && pTaskP->c4 && pTaskP->c5 )
/*1*/TASK( tmStripeWebHookIpListF )/*1*/


/**/
*/
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 33 years.
//
// Copyright (c) 1992-2024 Wo Of Ideafarm.  All rights reserved.  See https://github.com/ideafarm/ideafarm.home.1 for permitted uses.
//
