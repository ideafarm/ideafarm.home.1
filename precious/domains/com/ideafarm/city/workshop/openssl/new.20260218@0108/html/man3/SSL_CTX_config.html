<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>SSL_CTX_config</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#RETURN-VALUES">RETURN VALUES</a></li>
  <li><a href="#EXAMPLES">EXAMPLES</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#HISTORY">HISTORY</a></li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>SSL_CTX_config, SSL_config - configure SSL_CTX or SSL structure</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>#include &lt;openssl/ssl.h&gt;

int SSL_CTX_config(SSL_CTX *ctx, const char *name);
int SSL_config(SSL *s, const char *name);</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The functions SSL_CTX_config() and SSL_config() apply additional configuration settings to an <b>SSL_CTX</b> or <b>SSL</b> structure using the configuration <b>name</b>. The <b>name</b> must match a parameter in the configuration file&#39;s <b>ssl</b> module section, whose value is the name of another section with SSL configuration commands. See <a href="https://man7.org/linux/man-pages/man3/SSL_CONF_cmd.3.html">SSL_CONF_cmd(3)</a> for a description of the available commands.</p>

<p>By calling SSL_CTX_config() or SSL_config() an application can perform many complex tasks based on the contents of the configuration file: greatly simplifying application configuration code. Some future-proofing can be attained this way: the specified configuration section can specify settings supported by the run-time version of OpenSSL that were not known at the time the application code was written.</p>

<p>A configuration file must have been previously loaded, for example using CONF_modules_load_file(3). See <a href="https://man7.org/linux/man-pages/man5/config.5.html">config(5)</a> for details of the configuration file syntax. In most applications the default <b>openssl.cnf</b> file is loaded automatically as part of library initialisation.</p>

<h1 id="RETURN-VALUES">RETURN VALUES</h1>

<p>SSL_CTX_config() and SSL_config() return 1 for success or 0 if an error occurred.</p>

<h1 id="EXAMPLES">EXAMPLES</h1>

<p>If, for example, the loaded configuration file contains the following:</p>

<pre><code># Top level &quot;default&quot; section, if no application name was specified as part
# initialisation, it defaults to &quot;openssl_conf&quot;.
openssl_conf = openssl_init

[openssl_init]
# SSL module initialisation
ssl_conf = ssl_init

[ssl_init]
system_default = default_ssl_settings
tweaks_for_tls12 = tls12_custom_settings
tweaks_for_tls13 = tls13_custom_settings

[default_ssl_settings]
MinProtocol = TLSv1.2
# Defaults are typically the wisest choice, override only with good cause.
MinProtocol = ...
Ciphers = ...
Groups = ...
SignatureAlgorithms = ...

[tls12_custom_settings]
# Defaults are typically the wisest choice, override only with good cause.
MaxProtocol = TLSv1.2
...

[tls13_custom_settings]
# Defaults are typically the wisest choice, override only with good cause.
MinProtocol = TLSv1.3
...</code></pre>

<p>An application that wants to only use &quot;TLS 1.2&quot; might call:</p>

<pre><code>/* Initialised per &quot;system_default&quot; settings */
if ((ctx = SSL_CTX_new(TLS_server_method())) == NULL) {
    fprintf(stderr, &quot;Error creating the SSL context.\n&quot;);
    goto err;
}

/*
 * Further tweaks per the &quot;ssl&quot; module &quot;tweaks_for_tls12&quot; setting, i.e. the
 * configuration file&#39;s &quot;tls12_custom_settings&quot; section.
 */
if (SSL_CTX_config(ctx, &quot;tweaks_for_tls12&quot;) == 0) {
    fprintf(stderr, &quot;Error applying &#39;tweaks_for_tls12&#39; context configuration.\n&quot;);
    goto err;
}</code></pre>

<p>The setting of the protocol version ceiling and any other settings relevant to TLS 1.2 are in the configuration file, and don&#39;t need to be hard-coded in the application. Similarly, using <code>tweaks_for_tls13</code> as the configuration <b>name</b> applies the corresponding settings from the &quot;tls13_custom_settings&quot; section (per the SSL module <code>tweaks_for_tls13</code> parameter).</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a href="https://man7.org/linux/man-pages/man7/ssl.7.html">ssl(7)</a>, <a href="https://man7.org/linux/man-pages/man5/config.5.html">config(5)</a>, <a href="https://man7.org/linux/man-pages/man3/SSL_CONF_cmd.3.html">SSL_CONF_cmd(3)</a>, <a href="https://man7.org/linux/man-pages/man3/SSL_CTX_new.3.html">SSL_CTX_new(3)</a>, <a href="https://man7.org/linux/man-pages/man3/CONF_modules_load_file.3.html">CONF_modules_load_file(3)</a>, <a href="https://man7.org/linux/man-pages/man3/OPENSSL_init_ssl.3.html">OPENSSL_init_ssl(3)</a></p>

<h1 id="HISTORY">HISTORY</h1>

<p>The SSL_CTX_config() and SSL_config() functions were added in OpenSSL 1.1.0.</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>Copyright 2015-2020 The OpenSSL Project Authors. All Rights Reserved.</p>

<p>Licensed under the Apache License 2.0 (the &quot;License&quot;). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at <a href="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</a>.</p>


</body>

</html>


